<script>
document.addEventListener("DOMContentLoaded", () => {

  // ---------- Booking & Price Calculation ----------
  const vehicleSelect = document.getElementById("vehicleSelect");
  const pickupInput = document.getElementById("pickup");
  const dropoffInput = document.getElementById("dropoff");
  const totalPrice = document.getElementById("totalPrice");

  function calculateTotal() {
    const pickup = new Date(pickupInput.value);
    const dropoff = new Date(dropoffInput.value);

    if (!pickup  !dropoff  dropoff <= pickup) {
      totalPrice.textContent = "$0.00";
      return;
    }

    const days = Math.ceil((dropoff - pickup) / (1000 * 60 * 60 * 24));
    const selected = vehicleSelect.options[vehicleSelect.selectedIndex];
    const pricePerDay = Number(selected.dataset.price);
    const total = days * pricePerDay;

    totalPrice.textContent = `$${total}.00`;
  }

  vehicleSelect.addEventListener("change", calculateTotal);
  pickupInput.addEventListener("change", calculateTotal);
  dropoffInput.addEventListener("change", calculateTotal);

  // ---------- WhatsApp Booking ----------
  window.sendWhatsApp = function () {
    const pickup = new Date(pickupInput.value);
    const dropoff = new Date(dropoffInput.value);

    if (!pickup  !dropoff  dropoff <= pickup) {
      alert("Please select valid pickup and dropoff dates.");
      return;
    }

    const days = Math.ceil((dropoff - pickup) / (1000 * 60 * 60 * 24));
    const selected = vehicleSelect.options[vehicleSelect.selectedIndex];
    const pricePerDay = Number(selected.dataset.price);
    const total = days * pricePerDay;

    const message = 
      Booking Request:\n +
      Vehicle: ${selected.text}\n +
      Days: ${days}\n +
      Total: $${total};

    const url = https://wa.me/12139166606?text=${encodeURIComponent(message)};
    window.open(url, "_blank");
  };

  // ---------- Vehicle Display ----------
  const vehicles = {
    camry: {
      name: "2012 Toyota Camry",
      image: "images/car1.jpg",
      price: "$50 / day"
    },
    option2: {
      name: "Vehicle Option 2",
      image: "images/car2.jpg",
      price: "$70 / day"
    }
  };

  const vehicleImage = document.getElementById("vehicleImage");
  const vehicleName = document.getElementById("vehicleName");
  const priceLabel = document.getElementById("price");

  vehicleSelect.addEventListener("change", function () {
    const vehicle = vehicles[this.value];
    if (!vehicle) return;

    vehicleImage.src = vehicle.image;
    vehicleName.textContent = vehicle.name;
    priceLabel.textContent = vehicle.price;
  });

  // ---------- Slider ----------
  let currentSlide = 0;
  const slides = document.querySelectorAll(".slider .slide");

  function showSlide(index) {
    slides.forEach(slide => slide.classList.remove("active"));
    slides[index].classList.add("active");
  }

  window.changeSlide = function (direction) {
    currentSlide += direction;

    if (currentSlide < 0) currentSlide = slides.length - 1;
    if (currentSlide >= slides.length) currentSlide = 0;

    showSlide(currentSlide);
  };

});
</script>
