<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MY Car Rental</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>MY Car Rental</h1>
  </header>

  <div class="container">

    <!-- ---------- VEHICLE SLIDERS ---------- -->
    <section class="cars">

      <!-- Slingshot R -->
      <div class="car-slider">
        <h3>Slingshot R</h3>
        <div class="slider">
          <img class="slide active" src="images/car1.jpg" alt="Slingshot R">
          <img class="slide" src="images/car2.jpg" alt="Slingshot R">
          <img class="slide" src="images/car3.jpg" alt="Slingshot R">
        </div>
        <div class="slider-controls">
          <button onclick="prevSlide('slingshot')">&#10094;</button>
          <button onclick="nextSlide('slingshot')">&#10095;</button>
        </div>
        <div class="slider-dots" id="dots-slingshot">
          <span class="dot active" onclick="goToSlide('slingshot',0)"></span>
          <span class="dot" onclick="goToSlide('slingshot',1)"></span>
          <span class="dot" onclick="goToSlide('slingshot',2)"></span>
        </div>
        <p class="price">$300 / day • $150 deposit</p>
        <button onclick="selectCar('Slingshot R',300,0,150,this)">Select Slingshot</button>
      </div>

      <!-- Camry 2012 -->
      <div class="car-slider">
        <h3>Camry 2012</h3>
        <div class="slider">
          <img class="slide active" src="images/car4.jpg" alt="Camry 2012">
          <img class="slide" src="images/car5.jpg" alt="Camry 2012">
        </div>
        <div class="slider-controls">
          <button onclick="prevSlide('camry')">&#10094;</button>
          <button onclick="nextSlide('camry')">&#10095;</button>
        </div>
        <div class="slider-dots" id="dots-camry">
          <span class="dot active" onclick="goToSlide('camry',0)"></span>
          <span class="dot" onclick="goToSlide('camry',1)"></span>
        </div>
        <p class="price">$50 / day • $250 weekly</p>
        <button onclick="selectCar('Camry 2012',50,250,0,this)">Select Camry</button>
      </div>

    </section>

    <!-- ---------- BOOKING FORM ---------- -->
    <section class="booking">
      <h2>Book Your Ride</h2>

      <label>Pickup Date</label>
      <input type="date" id="pickup" onchange="calculateTotal(); checkAvailability();">

      <label>Pickup Time</label>
      <input type="time" id="pickupTime">

      <label>Return Date</label>
      <input type="date" id="return" onchange="calculateTotal(); checkAvailability();">

      <label>Return Time</label>
      <input type="time" id="returnTime">

      <p id="availability"></p>

      <label>Email</label>
      <input type="email" id="email" placeholder="Enter your email">

      <label>
        <input type="checkbox" id="agree">
        I agree to the <a href="https://docs.google.com/document/d/1vvG-SbqoUa8OipyduvTMlyOrwx7JREwCpYOkgURoVdI/edit?usp=sharing" target="_blank">Rental Agreement & Terms</a>
      </label>

      <p>Total Price: $<span id="total">0</span></p>

      <button onclick="reserve()">Reserve Now</button>
    </section>
  </div>

  <footer>
    &copy; 2026 MY Car Rental
  </footer>

  <!-- ----------------- JAVASCRIPT ----------------- -->
  <script>
    // ---------- VARIABLES ----------
    let selectedCar = null;
    let daily = 0;
    let weekly = 0;
    let deposit = 0;

    const bookedDates = {
      "Camry 2012": ['2026-02-01','2026-02-02'],
      "Slingshot R": ['2026-02-05']
    };

    // ---------- CAR SELECTION ----------
    function selectCar(name, d, w, dep, el) {
      selectedCar = name;
      daily = d;
      weekly = w;
      deposit = dep;
      alert(name + " selected! Now choose dates and enter your info below.");
      calculateTotal();
      checkAvailability();
    }

    // ---------- CALCULATE TOTAL ----------
    function calculateTotal() {
      const pick = new Date(document.getElementById('pickup').value);
      const ret = new Date(document.getElementById('return').value);
      if (!selectedCar || !pick || !ret || ret <= pick) return;

      const days = Math.ceil((ret - pick) / (1000 * 60 * 60 * 24));
      let cost = 0;

      if (weekly > 0 && days >= 7) {
        cost = Math.floor(days / 7) * weekly + (days % 7) * daily;
      } else {
        cost = days * daily;
      }

      cost += deposit;
      document.getElementById('total').innerText = cost;
    }

    // ---------- CHECK AVAILABILITY ----------
    function checkAvailability() {
      const pick = document.getElementById('pickup').value;
      const ret = document.getElementById('return').value;
      const status = document.getElementById('availability');

      if (!selectedCar || !pick || !ret) {
        status.innerText = '';
        return;
      }

      const dates = bookedDates[selectedCar] || [];
      if (dates.includes(pick) || dates.includes(ret)) {
        status.innerText = '❌ Not available for selected dates';
        status.style.color = 'red';
      } else {
        status.innerText = '✅ Available';
        status.style.color = 'green';
      }
    }

    // ---------- RESERVE ----------
    function reserve() {
      const email = document.getElementById('email').value;
      const agree = document.getElementById('agree').checked;

      if (!selectedCar) { alert('Please select a vehicle'); return; }
      if (!email) { alert('Please enter your email'); return; }
      if (!agree) { alert('You must agree to the Rental Agreement & Terms before paying'); return; }

      alert('✅ Reservation request sent! We will contact you shortly.');
    }

    // ---------- IMAGE SLIDER ----------
    const sliders = {
      slingshot: { index: 0, slides: [] },
      camry: { index: 0, slides: [] }
    };

    function initSliders() {
      sliders.slingshot.slides = document.querySelectorAll('.car-slider:nth-child(1) .slide');
      sliders.camry.slides = document.querySelectorAll('.car-slider:nth-child(2) .slide');
    }

    function showSlide(car) {
      const s = sliders[car];
      s.slides.forEach((img, i) => img.classList.toggle('active', i === s.index));
      updateDots(car);
    }

    function nextSlide(car) {
      const s = sliders[car];
      s.index = (s.index + 1) % s.slides.length;
      showSlide(car);
    }

    function prevSlide(car) {
      const s = sliders[car];
      s.index = (s.index - 1 + s.slides.length) % s.slides.length;
      showSlide(car);
    }

    function updateDots(car) {
      const s = sliders[car];
      const dots = document.querySelectorAll(`#dots-${car} .dot`);
      dots.forEach((dot, i) => dot.classList.toggle('active', i === s.index));
    }

    function goToSlide(car, index) {
      sliders[car].index = index;
      showSlide(car);
    }

    window.onload = initSliders;
  </script>
</body>
</html>
